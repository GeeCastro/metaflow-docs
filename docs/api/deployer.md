# Deployer - Deploying flows programmatically

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! Instead, edit the notebook w/the location & name as this file. -->

The `Deployer` class allows you to manage [production deployments](/production/introduction) programmatically. For an overview, see [Deploying flows programmatically](/metaflow/managing-flows/deployer).

Metaflow supports [various production orchestrators](/production/scheduling-metaflow-flows/introduction), each offering slightly different functionalities. All of them operate with the same high-level interfaces, exposed through the `Deployer` API:

1. Start by instantiating the top-level `Deployer` object.
2. Choose a production orchestrator through the functions of `Deployer`.
3. Deploy a flow by calling an implementation-specific `create()` function that returns a `DeployedFlow` representing a flow that is deployed but not yet running.
4. The `DeployedFlow` is ready to execute automatically if it is scheduled with [`@schedule`](/api/flow-decorators/schedule), [`@trigger`](/api/flow-decorators/trigger), 
and [`@trigger_on_finish`](/api/flow-decorators/trigger_on_finish) decorators.
5. Optionally, you can trigger a run explictly by calling `DeployedFlow.trigger()` that returns a `TriggeredRun`  representing a run that will start executing.
6. Once the run has started executing, `TriggeredRun.run` returns a corresponding [`Run` object](/api/client#run).

### Example

```python
import time
from metaflow import Deployer
deployed_flow = Deployer('helloflow.py').argo_workflows().create()
print('Production token', deployed_flow.production_token)
triggered_run = deployed_flow.trigger()
while triggered_run.run is None:
    print(f'Waiting for the run to start')
    time.sleep(1)
print('Run started', triggered_run.run)
print('Terminating the flow', triggered_run.terminate())
```

Note that you can replace `argo_workflows()` above with `step_functions()` without changing anything
else in the code.

In addition to this basic functionality, each implementation-specific object exposes additional functions for managing deployed flows and runs, as documented below.

## Common `Deployer`


<DocSection type="class" name="Deployer" module="metaflow" show_import="False" heading_level="3" link="https://github.com/Netflix/metaflow/tree/master/">
<SigArgSection>
<SigArg name="flow_file, show_output=True, profile=None, env=None, cwd=None, **kwargs" />
</SigArgSection>
<Description summary="Use the `Deployer` class to configure and access one of the production\norchestrators supported by Metaflow." />
<ParamSection name="Parameters">
	<Parameter name="flow_file" type="str" desc="Path to the flow file to deploy." />
	<Parameter name="show_output" type="bool, default True" desc="Show the 'stdout' and 'stderr' to the console by default." />
	<Parameter name="profile" type="Optional[str], default None" desc="Metaflow profile to use for the deployment. If not specified, the default\nprofile is used." />
	<Parameter name="env" type="Optional[Dict[str, str]], default None" desc="Additional environment variables to set for the deployment." />
	<Parameter name="cwd" type="Optional[str], default None" desc="The directory to run the subprocess in; if not specified, the current\ndirectory is used." />
	<Parameter name="**kwargs" type="Any" desc="Additional arguments that you would pass to `python myflow.py` before\nthe deployment command." />
</ParamSection>
</DocSection>



<DocSection type="method" name="Deployer.argo_workflows" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L11">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Returns a deployer specific to Argo Workflows." />
<ParamSection name="Returns">
	<Parameter type="ArgoWorkflowsDeployer" desc="a deployer class specific to Argo Workflows" />
</ParamSection>
</DocSection>



<DocSection type="method" name="Deployer.step_functions" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L21">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Returns a deployer specific to Step Functions." />
<ParamSection name="Returns">
	<Parameter type="StepFunctionsDeployer" desc="a deployer class specific to Step Functions" />
</ParamSection>
</DocSection>


## Deploy Argo Workflows with `ArgoWorkflowsDeployer`


<DocSection type="method" name="ArgoWorkflowsDeployer.create" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L52">
<SigArgSection>
<SigArg name="self" /><SigArg name="**kwargs" />
</SigArgSection>
<Description summary="Create a deployed flow using the deployer implementation." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to `create` corresponding to the\ncommand line arguments of `create`" />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="DeployedFlow" desc="DeployedFlow object representing the deployed flow." />
</ParamSection>
<ParamSection name="Raises">
	<Parameter type="Exception" desc="If there is an error during deployment." />
</ParamSection>
</DocSection>


### Manage a flow deployed on Argo Workflows with `ArgoWorkflowsDeployedFlow`


<DocSection type="property" name="ArgoWorkflowsDeployedFlow.production_token" module="__main__" show_import="False" heading_level="4">

<Description summary="Get the production token for the deployed flow.\n" />
<ParamSection name="Returns">
<Parameter type="str, optional" desc="The production token, None if it cannot be retrieved." />
</ParamSection>
</DocSection>



<DocSection type="method" name="ArgoWorkflowsDeployedFlow.trigger" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L40">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Trigger a new run for the deployed flow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the trigger command, `Parameters` in particular" />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="ArgoWorkflowsTriggeredRun" desc="The triggered run instance." />
</ParamSection>
<ParamSection name="Raises">
	<Parameter type="Exception" desc="If there is an error during the trigger process." />
</ParamSection>
</DocSection>



<DocSection type="method" name="ArgoWorkflowsDeployedFlow.delete" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L43">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Delete the deployed flow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the delete command." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="bool" desc="True if the command was successful, False otherwise." />
</ParamSection>
</DocSection>


### Manage a run triggered on Argo Workflows with `ArgoWorkflowsTriggeredRun`


<DocSection type="property" name="ArgoWorkflowsTriggeredRun.run" module="__main__" show_import="False" heading_level="4">

<Description summary="Retrieve the `Run` object for the triggered run.\n\nNote that Metaflow `Run` becomes available only when the `start` task\nhas started executing.\n" />
<ParamSection name="Returns">
<Parameter type="Run, optional" desc="Metaflow Run object if the `start` step has started executing, otherwise None." />
</ParamSection>
</DocSection>



<DocSection type="method" name="ArgoWorkflowsTriggeredRun.terminate" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L15">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Terminate the running workflow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the terminate command." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="bool" desc="True if the command was successful, False otherwise." />
</ParamSection>
</DocSection>



<DocSection type="method" name="ArgoWorkflowsTriggeredRun.suspend" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L18">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Suspend the running workflow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the suspend command." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="bool" desc="True if the command was successful, False otherwise." />
</ParamSection>
</DocSection>



<DocSection type="method" name="ArgoWorkflowsTriggeredRun.unsuspend" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L21">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Unsuspend the suspended workflow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the unsuspend command." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="bool" desc="True if the command was successful, False otherwise." />
</ParamSection>
</DocSection>



<DocSection type="method" name="ArgoWorkflowsTriggeredRun.status" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L24">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Get the status of the triggered run." />
<ParamSection name="Returns">
	<Parameter type="str, optional" desc="The status of the workflow considering the run object, or None if the status could not be retrieved." />
</ParamSection>
</DocSection>


## Deploy Step Functions with `StepFunctionsDeployer`


<DocSection type="method" name="StepFunctionsDeployer.create" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L42">
<SigArgSection>
<SigArg name="self" /><SigArg name="**kwargs" />
</SigArgSection>
<Description summary="Create a deployed flow using the deployer implementation." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to `create` corresponding to the\ncommand line arguments of `create`" />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="DeployedFlow" desc="DeployedFlow object representing the deployed flow." />
</ParamSection>
<ParamSection name="Raises">
	<Parameter type="Exception" desc="If there is an error during deployment." />
</ParamSection>
</DocSection>


### Manage a flow deployed on Step Functions with `StepFunctionsDeployedFlow`


<DocSection type="property" name="StepFunctionsDeployedFlow.production_token" module="__main__" show_import="False" heading_level="4">

<Description summary="Get the production token for the deployed flow.\n" />
<ParamSection name="Returns">
<Parameter type="str, optional" desc="The production token, None if it cannot be retrieved." />
</ParamSection>
</DocSection>



<DocSection type="method" name="StepFunctionsDeployedFlow.trigger" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L27">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Trigger a new run for the deployed flow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the trigger command, `Parameters` in particular" />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="StepFunctionsTriggeredRun" desc="The triggered run instance." />
</ParamSection>
<ParamSection name="Raises">
	<Parameter type="Exception" desc="If there is an error during the trigger process." />
</ParamSection>
</DocSection>



<DocSection type="method" name="StepFunctionsDeployedFlow.delete" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L30">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Delete the deployed flow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the delete command." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="bool" desc="True if the command was successful, False otherwise." />
</ParamSection>
</DocSection>



<DocSection type="method" name="StepFunctionsDeployedFlow.list_runs" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L33">
<SigArgSection>
<SigArg name="self" /><SigArg name="states" />
</SigArgSection>
<Description summary="List runs of the deployed flow." />
<ParamSection name="Parameters">
	<Parameter name="states" type="Optional[List[str]], optional" desc="A list of states to filter the runs by. Allowed values are:\nRUNNING, SUCCEEDED, FAILED, TIMED_OUT, ABORTED.\nIf not provided, all states will be considered." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="List[TriggeredRun]" desc="A list of TriggeredRun objects representing the runs of the deployed flow." />
</ParamSection>
<ParamSection name="Raises">
	<Parameter type="ValueError" desc="If any of the provided states are invalid or if there are duplicate states." />
</ParamSection>
</DocSection>


### Manage a run triggered on Step Functions with `StepFunctionsTriggeredRun`


<DocSection type="property" name="StepFunctionsTriggeredRun.run" module="__main__" show_import="False" heading_level="4">

<Description summary="Retrieve the `Run` object for the triggered run.\n\nNote that Metaflow `Run` becomes available only when the `start` task\nhas started executing.\n" />
<ParamSection name="Returns">
<Parameter type="Run, optional" desc="Metaflow Run object if the `start` step has started executing, otherwise None." />
</ParamSection>
</DocSection>



<DocSection type="method" name="StepFunctionsTriggeredRun.terminate" module="metaflow" show_import="False" heading_level="4" link="https://github.com/Netflix/metaflow/tree/master/__main__.py#L13">
<SigArgSection>
<SigArg name="self" />
</SigArgSection>
<Description summary="Terminate the running workflow." />
<ParamSection name="Parameters">
	<Parameter name="**kwargs" type="Any" desc="Additional arguments to pass to the terminate command." />
</ParamSection>
<ParamSection name="Returns">
	<Parameter type="bool" desc="True if the command was successful, False otherwise." />
</ParamSection>
</DocSection>

